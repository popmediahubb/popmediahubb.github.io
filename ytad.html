<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hidden YouTube Embed</title>
    <style>
        /* Hidden div */
        #videoContainer {
            width: 250px;
            height: 100px;
            overflow: hidden;
            position: absolute;
            left: -9999px;
            visibility: hidden;
        }
    </style>
</head>
<body>

    <!-- Hidden Video Div -->
    <div id="videoContainer">
        <iframe id="ytplayer" frameborder="0" allowfullscreen allow="autoplay"></iframe>
    </div>

    <script>
        var videoId = 'p-7ty-n_lt0'; // YT Video ID

        function loadVideo() {
            var iframe = document.getElementById("ytplayer");
            iframe.src = 'https://www.google.com/url?sa=D&q=https%3A%2F%2Fwww.youtube.com%2Fembed%2F' + videoId + 
                         '%3Fautoplay%3D1%26mute%3D1%26enablejsapi%3D1%26el%3Dembedded%26rel%3D0%26playsinline%3D1%26modestbranding%3D1%26loop%3D1%26playlist%3D' + videoId;
            iframe.width = "250";
            iframe.height = "100";

            // Show div for 2 sec then hide again
            setTimeout(() => {
                document.getElementById("videoContainer").style.left = "10px";
                document.getElementById("videoContainer").style.visibility = "visible";

                setTimeout(() => {
                    document.getElementById("videoContainer").style.left = "-9999px";
                    document.getElementById("videoContainer").style.visibility = "hidden";
                }, 2000);
            }, 5000);
        }

        loadVideo();

        // YouTube API
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('ytplayer', {
                events: {
                    'onReady': function(event) {
                        setTimeout(() => {
                            event.target.unMute(); // Unmute after 5 sec
                        }, 5000);
                    },
                    'onStateChange': function(event) {
                        if (event.data === YT.PlayerState.PLAYING) {
                            setTimeout(() => {
                                player.pauseVideo();
                                setTimeout(() => {
                                    player.playVideo(); // Fake Interaction
                                }, 2000);
                            }, 5000);
                        }
                    }
                }
            });
        }

        // Auto-refresh session after 10 min
        setTimeout(function() {
            try {
                document.getElementById("ytplayer").remove();
            } catch (ex) {}
            window.location.reload();
        }, 600 * 1000);

    </script>

</body>
</html>
